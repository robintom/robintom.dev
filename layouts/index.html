{{ define "main" }}
<section class="intro">
  <div class="intro-header">
    <div class="intro-content">
      <h1 class="intro-greeting"><span class="intro-wave">ðŸ‘‹</span> Hey</h1>
      <p class="intro-text">
        I'm <strong>Robin Tom</strong> â€” a developer who enjoys building things and writing about the journey.
      </p>
      <p class="intro-subtext">
        Here you'll find my thoughts on code, tools, and the occasional deep dive into interesting problems.
      </p>
    </div>
    <div class="intro-avatar">
      <img src="{{ .Site.Params.avatar | default "/images/avatar-placeholder.svg" }}" alt="{{ .Site.Params.author }}" />
    </div>
  </div>
</section>

<section class="posts-section">
  <h2 class="section-title">Latest Posts</h2>

  {{ $posts := where .Site.RegularPages "Section" "posts" }}
  {{ $posts = $posts | first 5 }}

  {{ if $posts }}
    <ul class="item-list">
      {{ range $posts }}
        <li class="item">
          <a href="{{ .Permalink }}" class="item-link">
            <time class="item-date" datetime="{{ .Date.Format "2006-01-02" }}">
              {{ .Date.Format "Jan 2" }}
            </time>
            <div class="item-content">
              <h3 class="item-title">{{ .Title }}</h3>
              {{ with .Description }}
                <p class="item-description">{{ . }}</p>
              {{ end }}
            </div>
            <span class="item-meta">{{ math.Round (div (countwords .Content) 200.0) }} min</span>
          </a>
        </li>
      {{ end }}
    </ul>

    <a href="/posts/" class="view-all">View all posts</a>
  {{ else }}
    <p class="no-posts">No posts yet. Check back soon!</p>
  {{ end }}
</section>

<section class="til-section">
  <h2 class="section-title">Today I Learned</h2>

  {{ $tils := where .Site.RegularPages "Section" "til" }}
  {{ $tils = $tils | first 3 }}

  {{ if $tils }}
    <ul class="item-list">
      {{ range $tils }}
        <li class="item">
          <a href="{{ .Permalink }}" class="item-link">
            <time class="item-date" datetime="{{ .Date.Format "2006-01-02" }}">
              {{ .Date.Format "Jan 2" }}
            </time>
            <div class="item-content">
              <h3 class="item-title">{{ .Title }}</h3>
              {{ with .Description }}
                <p class="item-description">{{ . }}</p>
              {{ end }}
            </div>
          </a>
        </li>
      {{ end }}
    </ul>

    <a href="/til/" class="view-all">View all TILs</a>
  {{ else }}
    <p class="no-posts">No TILs yet. Check back soon!</p>
  {{ end }}
</section>
{{ end }}
